<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap/4.1.3/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{css/style.css}">
</head>
<body>
    <header class="fixed-top">
        <p th:text="${name}"></p>
    </header>
    <div style="height: 50px;"></div>
    <main>
        <table class="table table-dark table-striped text-white table-hover">
            <tr>
                <th>ID</th>
                <th>ARTICLE_NAME</th>
                <th>ARTICLE_TEXT</th>
                <th>USER_NAME</th>
                <span sec:authorize="hasRole('ADMIN')"><th>ACTION</th></span>
            </tr>
            <tr th:each="article : ${articles}">
                <td th:text="${article.id}"></td>
                <td th:text="${article.articleName}"></td>
                <td th:text="${article.articleText}"></td>
                <td th:text="${article.getUser().firstName + ' ' + article.getUser().lastName }"></td>
                <span sec:authorize="hasRole('ADMIN')"><td><a th:href="@{'/delete/id' + ${article.id}}">DELETE</a></td></span>
            </tr>
        </table>
    </main>
    <footer class="fixed-bottom">
        <div class="container-fluid h-100">
            <div class="row h-100">
                <div class="col-sm-6 offset-1 align-self-center">
                    <span sec:authorize="isAuthenticated()" style="display: inline-block;">
                    | Logged user: <span sec:authentication="name"></span> |
                    Roles: <span sec:authentication="principal.authorities"></span> |
                    <a th:href="@{/logout}">Sign Out</a>
                </span>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>